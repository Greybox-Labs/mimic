mode: mock

server:
  listen_host: "0.0.0.0"
  listen_port: 8080
  grpc_port: 9090

proxies:
  anthropic:
    protocol: "https"
    target_host: "api.anthropic.com"
    target_port: 443
    session_name: "anthropic-test"

  astria-grpc:
    protocol: "grpc"
    target_host: "grpc.astria.org"
    target_port: 443
    session_name: "grpc-mock-session"
    service_pattern: "astria\\..*"

  # test-grpc:
  #   mode: "record"
  #   protocol: "grpc"
  #   target_host: "localhost"
  #   target_port: 9191
  #   session_name: "test-grpc-session"

database:
  path: "~/.mimic/recordings.db"
  connection_pool_size: 10

recording:
  session_name: "default"
  capture_headers: true
  capture_body: true
  redact_patterns:
    - "Authorization: Bearer .*"
    - "X-Api-Key: .*"

mock:
  matching_strategy: "exact" # exact | pattern | fuzzy
  sequence_mode: "ordered" # ordered | random
  not_found_response:
    status: 199
    body:
      error: "Recording not found"

grpc:
  proto_paths:
    - "./protos"
  reflection_enabled: true

export:
  format: "json"
  pretty_print: true
  compress: false
